<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<head>
		<div th:replace="fragments/fragments :: head">
		</div>
	</head>
</head>

<body>

	<header>
		<div th:replace="fragments/fragments :: header">
				</div>
	</header>

<main>
	<section>
		<div class="container mt-5">
			<div class="row">
				<div class=" col-lg-12 mt-1">
					<div class="col-12 mb-4	d-flex justify-content-center">
						<h1 th:if="${addMode}">Crea nota</h1>
						<h1 th:unless="${addMode}"> Modifica Nota</h1>
					</div>
					<div>
						<h1 th:unless="	${availableToFillIn}"> Non puoi modificare questa nota</h1>
					</div>
					<div th:if="${availableToFillIn}">
						<form id="formNote" th:object="${note}"
							th:action="${addMode} ? @{/notes/addnote} : @{/notes/ticket/editnote/{id} (id=${note.id})}"
							method="post">
							<div class="col-12 mt-4">
								<label for="description"> Descrizione </label>
								<textarea class="form-control" id="description" placeholder="nota" maxlength="600000"
									th:field="*{description}" th:errorClass="is-invalid"></textarea><br>
								<div th:if="${#fields.hasErrors('description')}" class="invalid-feedback">
									<ul>
										<li th:each="err : ${#fields.errors('description')}" th:text="${err}"></li>
									</ul>
								</div>
							</div>
							<div>
								<input type="hidden" th:field="*{date}" id="ticket">
								<input type="hidden" th:field="*{author}" id="ticket">
								<input type="hidden" th:field="*{ticket}" id="ticket">
							</div>
							<div class="col-12 mt-4">
								<ul>
									<li style="color: red;" th:each="err : ${#fields.allErrors()}" th:text="${err}"></li>
								</ul>
							</div>
							<!-- POI DA CONTROLLARE -->
							<div th:if="${addMode}">
								<button class="mt-2" type="submit">Aggiungi</button>
							</div>
							<div th:unless="${addMode}">
								<button class="mt-2" type="submit">Modifica</button>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
	</section>
</main>
	<script th:src="@{/webjars/bootstrap/5.1.3/js/bootstrap.bundle.min.js}"></script>

</body>

</html>